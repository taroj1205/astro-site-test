<div id="contextMenu" class="fixed z-20 hidden rounded bg-white p-2 shadow-md">
  <button id="changeThemeColor" class="block w-full text-left">
    Change Theme Colors
    <input type="color" id="colorInput" class="hidden" />
  </button>
</div>

<script>
  const contextMenu = document.querySelector("#contextMenu") as HTMLElement;
  const changeThemeColorButton = document.querySelector("#changeThemeColor");
  const colorInput = document.querySelector("#colorInput") as HTMLInputElement;

  document.addEventListener("contextmenu", (e) => {
    e.preventDefault();
    contextMenu.style.left = `${e.clientX}px`;
    contextMenu.style.top = `${e.clientY}px`;
    contextMenu.classList.remove("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!contextMenu.contains(e.target as Node)) {
      contextMenu.classList.add("hidden");
    }
  });

  changeThemeColorButton.addEventListener("click", () => {
    colorInput.click();
  });

  colorInput.addEventListener("click", (e) => {
    e.stopPropagation();
    contextMenu.classList.add("hidden");
  });

  colorInput.addEventListener("input", (e) => {
    const color = (e.target as HTMLInputElement).value;
    document.documentElement.style.setProperty("--primary", color);
  });
</script>

<style>
  @tailwind base;
  @layer base {
    #contextMenu {
      @apply fixed top-1/2 right-2 h-auto w-56 appearance-none;
    }
  }
</style>
